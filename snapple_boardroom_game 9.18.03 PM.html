<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snapple Boardroom Survival - Leadership Game</title>
    <style>
        /* ========== RETRO PIXEL GAME STYLES ========== */
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap');
        
        :root {
            --pixel-black: #0f0f1b;
            --pixel-dark: #1a1c2c;
            --pixel-blue: #333c57;
            --pixel-purple: #566c86;
            --pixel-gray: #9badb7;
            --pixel-white: #c0cbdc;
            --pixel-cream: #f4f4f4;
            --pixel-red: #b13e53;
            --pixel-orange: #ef7d57;
            --pixel-yellow: #ffcd75;
            --pixel-gold: #f4b41b;
            --pixel-green: #38b764;
            --pixel-dark-green: #257953;
            --pixel-cyan: #41a6f6;
            --pixel-light-blue: #73eff7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'VT323', monospace;
            background-color: var(--pixel-black);
            background-image: 
                linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
            background-size: 4px 4px;
            color: var(--pixel-white);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            font-size: 18px;
            line-height: 1.8;
        }

        /* CRT Scanline Effect */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.15),
                rgba(0, 0, 0, 0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
            z-index: 9999;
        }

        /* ========== GAME CONTAINER ========== */
        #game-container {
            max-width: 900px;
            width: 100%;
            background: var(--pixel-dark);
            padding: 24px;
            border: 4px solid var(--pixel-cyan);
            box-shadow: 8px 8px 0 0 var(--pixel-blue);
            position: relative;
        }

        /* ========== TITLE SCREEN ========== */
        #title-screen {
            text-align: center;
        }

        #title-screen h1 {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.4em;
            color: var(--pixel-gold);
            margin-bottom: 16px;
            text-shadow: 4px 4px 0 var(--pixel-black);
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { text-shadow: 4px 4px 0 var(--pixel-black), 0 0 10px var(--pixel-gold); }
            to { text-shadow: 4px 4px 0 var(--pixel-black), 0 0 20px var(--pixel-yellow); }
        }

        #title-screen .subtitle {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6em;
            color: var(--pixel-cyan);
            margin-bottom: 24px;
        }

        #title-screen .story-intro {
            background: var(--pixel-black);
            padding: 20px;
            border: 4px solid var(--pixel-purple);
            margin: 24px 0;
            text-align: left;
        }

        #title-screen .story-intro h3 {
            font-family: 'Press Start 2P', cursive;
            color: var(--pixel-yellow);
            margin-bottom: 16px;
            font-size: 0.8em;
        }

        #title-screen .story-intro p {
            margin-bottom: 12px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        /* Pixel Buttons */
        .start-button, .continue-to-game-button, .restart-button, #continue-button {
            font-family: 'Press Start 2P', cursive;
            background: var(--pixel-green);
            color: var(--pixel-black);
            border: none;
            padding: 16px 32px;
            font-size: 0.7em;
            cursor: pointer;
            margin-top: 20px;
            text-transform: uppercase;
            box-shadow: 0 6px 0 0 var(--pixel-dark-green);
        }

        .start-button:hover, .continue-to-game-button:hover, .restart-button:hover, #continue-button:hover {
            background: var(--pixel-light-blue);
            box-shadow: 0 6px 0 0 var(--pixel-cyan);
        }

        .start-button:active, .continue-to-game-button:active, .restart-button:active, #continue-button:active {
            box-shadow: 0 2px 0 0 var(--pixel-dark-green);
            transform: translateY(4px);
        }

        .restart-button {
            background: var(--pixel-red);
            box-shadow: 0 6px 0 0 #8a2f3f;
        }

        /* ========== MEET THE PLAYERS SCREEN ========== */
        #meet-players-screen {
            text-align: center;
        }

        #meet-players-screen h2 {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.1em;
            color: var(--pixel-gold);
            margin-bottom: 16px;
        }

        #meet-players-screen .instruction {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.5em;
            color: var(--pixel-cyan);
            margin-bottom: 32px;
            animation: blink 1s step-end infinite;
        }

        @keyframes blink {
            50% { opacity: 0.5; }
        }

        .players-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin: 32px 0;
            gap: 16px;
        }

        .player-profile {
            text-align: center;
            padding: 12px;
            cursor: pointer;
            opacity: 0.7;
            background: var(--pixel-black);
            border: 3px solid var(--pixel-blue);
            width: 120px;
        }

        .player-profile:hover {
            opacity: 1;
            border-color: var(--pixel-yellow);
            background: var(--pixel-blue);
            transform: translateY(-4px);
        }

        .player-profile.viewed {
            opacity: 1;
            border-color: var(--pixel-green);
        }

        .player-profile-icon {
            font-size: 2.5em;
            margin-bottom: 8px;
            display: block;
        }

        .player-profile-name {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.55em;
            margin-bottom: 4px;
            color: var(--pixel-cream);
        }

        .player-profile-title {
            font-size: 0.95em;
            color: var(--pixel-gray);
            margin-bottom: 8px;
        }

        .player-profile-hint {
            font-size: 0.9em;
            color: var(--pixel-cyan);
        }

        /* Player profile colors */
        .player-profile.alex { border-color: var(--pixel-cyan); }
        .player-profile.david { border-color: var(--pixel-green); }
        .player-profile.sarah { border-color: var(--pixel-red); }
        .player-profile.maria { border-color: var(--pixel-orange); }
        .player-profile.tom { border-color: var(--pixel-gray); }
        .player-profile.roger { border-color: var(--pixel-gold); }

        /* Player Detail Modal */
        .player-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 15, 27, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .player-modal.active {
            display: flex;
        }

        .player-modal-content {
            background: var(--pixel-dark);
            padding: 24px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            border: 4px solid var(--pixel-cyan);
            box-shadow: 8px 8px 0 0 var(--pixel-black);
        }

        .player-modal-content.alex { border-color: var(--pixel-cyan); }
        .player-modal-content.david { border-color: var(--pixel-green); }
        .player-modal-content.sarah { border-color: var(--pixel-red); }
        .player-modal-content.maria { border-color: var(--pixel-orange); }
        .player-modal-content.tom { border-color: var(--pixel-gray); }
        .player-modal-content.roger { border-color: var(--pixel-gold); }

        .player-modal-close {
            position: absolute;
            top: 8px;
            right: 12px;
            font-size: 1.5em;
            cursor: pointer;
            color: var(--pixel-red);
            background: none;
            border: none;
            font-family: 'Press Start 2P', cursive;
        }

        .player-modal-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 4px dashed var(--pixel-blue);
        }

        .player-modal-icon {
            font-size: 3em;
            margin-bottom: 12px;
        }

        .player-modal-name {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.9em;
            margin-bottom: 8px;
            color: var(--pixel-yellow);
        }

        .player-modal-title {
            font-size: 1.1em;
            color: var(--pixel-gray);
        }

        .player-modal-section {
            margin: 16px 0;
            padding: 12px;
            background: var(--pixel-black);
            border-left: 4px solid var(--pixel-blue);
        }

        .player-modal-section.alex { border-color: var(--pixel-cyan); }
        .player-modal-section.david { border-color: var(--pixel-green); }
        .player-modal-section.sarah { border-color: var(--pixel-red); }
        .player-modal-section.maria { border-color: var(--pixel-orange); }
        .player-modal-section.tom { border-color: var(--pixel-gray); }
        .player-modal-section.roger { border-color: var(--pixel-gold); }

        .player-modal-section h4 {
            font-family: 'Press Start 2P', cursive;
            color: var(--pixel-yellow);
            margin-bottom: 8px;
            font-size: 0.6em;
        }

        .player-modal-section p {
            color: var(--pixel-white);
            font-size: 1.1em;
            line-height: 1.5;
        }

        /* ========== SCORE BAR ========== */
        #score-bar {
            background: var(--pixel-black);
            padding: 12px;
            border: 3px solid var(--pixel-purple);
            margin-bottom: 20px;
            display: none;
        }

        .score-item {
            margin: 8px 0;
            font-size: 1em;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }

        .score-label {
            font-family: 'Press Start 2P', cursive;
            min-width: 130px;
            color: var(--pixel-cyan);
            font-size: 0.5em;
        }

        .score-bar-fill {
            display: inline-block;
            width: 150px;
            height: 16px;
            background: var(--pixel-blue);
            border: 2px solid var(--pixel-purple);
        }

        .score-bar-inner {
            height: 100%;
            background: linear-gradient(90deg, var(--pixel-red) 0%, var(--pixel-yellow) 50%, var(--pixel-green) 100%);
            transition: width 0.3s steps(10);
        }

        .allies-list {
            color: var(--pixel-green);
        }

        /* ========== DIALOGUE BOX ========== */
        #dialogue-box {
            background: var(--pixel-cream);
            color: var(--pixel-black);
            padding: 20px;
            margin-bottom: 20px;
            min-height: 100px;
            display: none;
            border: 4px solid var(--pixel-blue);
            box-shadow: 8px 8px 0 0 var(--pixel-black);
            position: relative;
        }

        #dialogue-box::before {
            content: "‚ñº";
            position: absolute;
            bottom: 8px;
            right: 12px;
            color: var(--pixel-blue);
            animation: bounce 0.5s step-end infinite alternate;
        }

        @keyframes bounce {
            to { transform: translateY(-4px); }
        }

        .speaker-name {
            font-family: 'Press Start 2P', cursive;
            color: var(--pixel-dark);
            margin-bottom: 12px;
            font-size: 0.65em;
            padding-bottom: 8px;
            border-bottom: 2px dashed var(--pixel-purple);
        }

        .dialogue-text {
            font-size: 1.2em;
            line-height: 1.7;
        }

        .dialogue-emotion {
            margin-top: 12px;
            font-size: 1em;
            color: var(--pixel-purple);
        }

        /* ========== CHARACTERS ========== */
        #characters {
            display: flex;
            justify-content: center;
            margin: 24px 0;
            flex-wrap: wrap;
            gap: 8px;
            display: none;
        }

        .character {
            text-align: center;
            padding: 8px;
            opacity: 0.5;
            background: var(--pixel-black);
            border: 2px solid var(--pixel-blue);
            min-width: 80px;
        }

        .character.active {
            opacity: 1;
            border-color: var(--pixel-yellow);
            background: var(--pixel-blue);
        }

        .character.speaking {
            animation: pixelGlow 0.3s step-end infinite alternate;
        }

        @keyframes pixelGlow {
            to { box-shadow: 0 0 0 4px var(--pixel-yellow); }
        }

        .character-icon {
            font-size: 2em;
            margin-bottom: 4px;
            display: block;
        }

        .character.alex .character-icon { color: var(--pixel-cyan); }
        .character.david .character-icon { color: var(--pixel-green); }
        .character.sarah .character-icon { color: var(--pixel-red); }
        .character.maria .character-icon { color: var(--pixel-orange); }
        .character.tom .character-icon { color: var(--pixel-gray); }
        .character.roger .character-icon { color: var(--pixel-gold); }

        .character-name {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.4em;
            color: var(--pixel-cream);
        }

        .character-title {
            font-size: 0.85em;
            color: var(--pixel-gray);
            margin-top: 4px;
        }

        .character-emotion {
            font-size: 1.2em;
            margin-top: 4px;
            height: 24px;
        }

        /* ========== CHOICES ========== */
        #choices {
            display: none;
        }

        .choice-button {
            font-family: 'VT323', monospace;
            background: var(--pixel-dark);
            border: 3px solid var(--pixel-cyan);
            color: var(--pixel-white);
            padding: 16px;
            margin: 8px 0;
            cursor: pointer;
            text-align: left;
            font-size: 1.1em;
            width: 100%;
            position: relative;
        }

        .choice-button::before {
            content: "‚ñ∫";
            position: absolute;
            left: -20px;
            opacity: 0;
            color: var(--pixel-yellow);
        }

        .choice-button:hover {
            background: var(--pixel-blue);
            border-color: var(--pixel-yellow);
            padding-left: 24px;
        }

        .choice-button:hover::before {
            opacity: 1;
            left: 8px;
        }

        .choice-label {
            font-family: 'Press Start 2P', cursive;
            display: block;
            margin-bottom: 8px;
            color: var(--pixel-yellow);
            font-size: 0.7em;
        }

        .choice-description {
            font-size: 0.95em;
            color: var(--pixel-gray);
            margin-top: 8px;
        }

        /* ========== CONTINUE BUTTON ========== */
        #continue-button {
            display: none;
            margin: 20px auto;
        }

        /* ========== ENDING SCREEN ========== */
        #ending-screen {
            text-align: center;
            display: none;
        }

        .ending-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.9em;
            margin-bottom: 20px;
            color: var(--pixel-gold);
        }

        .ending-content {
            background: var(--pixel-black);
            padding: 20px;
            margin: 16px 0;
            text-align: left;
            border: 3px solid var(--pixel-purple);
            font-size: 1.1em;
        }

        .what-happened-next {
            background: var(--pixel-black);
            padding: 16px;
            margin: 20px 0;
            text-align: left;
            border: 3px solid var(--pixel-cyan);
            border-left-width: 8px;
            font-size: 1.1em;
        }

        .what-happened-next h3 {
            font-family: 'Press Start 2P', cursive;
            color: var(--pixel-cyan);
            margin-bottom: 12px;
            font-size: 0.7em;
        }

        .leadership-tips {
            background: var(--pixel-black);
            padding: 16px;
            margin: 20px 0;
            text-align: left;
            border: 3px solid var(--pixel-green);
        }

        .leadership-tips h3 {
            font-family: 'Press Start 2P', cursive;
            color: var(--pixel-green);
            margin-bottom: 16px;
            font-size: 0.7em;
        }

        .leadership-tip {
            background: var(--pixel-dark);
            padding: 12px;
            margin: 12px 0;
            border-left: 4px solid var(--pixel-green);
            font-size: 1em;
        }

        .leadership-tip-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            gap: 12px;
        }

        .leadership-tip-icon {
            font-size: 2em;
        }

        .leadership-tip-title {
            font-family: 'Press Start 2P', cursive;
            color: var(--pixel-yellow);
            font-size: 0.55em;
        }

        .leadership-tip-course {
            color: var(--pixel-gray);
            line-height: 1.6;
        }

        .course-connection {
            background: var(--pixel-black);
            padding: 16px;
            border: 3px solid var(--pixel-gold);
            border-left-width: 8px;
            margin: 20px 0;
            text-align: left;
            font-size: 1.1em;
        }

        .course-connection h4 {
            font-family: 'Press Start 2P', cursive;
            color: var(--pixel-gold);
            margin-bottom: 12px;
            font-size: 0.6em;
        }

        .final-scores {
            background: var(--pixel-dark);
            padding: 16px;
            margin: 20px 0;
            border: 4px double var(--pixel-green);
            font-size: 1em;
        }

        .final-scores h3 {
            font-family: 'Press Start 2P', cursive;
            color: var(--pixel-green);
            margin-bottom: 12px;
            font-size: 0.6em;
        }

        /* ========== SCENE ILLUSTRATION ========== */
        #scene-illustration {
            width: 100%;
            height: 180px;
            background: var(--pixel-black);
            border: 4px solid var(--pixel-purple);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            display: none;
        }

        .scene-bg {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .bg-hallway {
            background: 
                linear-gradient(var(--pixel-purple), var(--pixel-purple)) 75% 20%/60px 120px no-repeat,
                linear-gradient(var(--pixel-blue), var(--pixel-blue)) 75% 20%/50px 110px no-repeat,
                linear-gradient(var(--pixel-gold), var(--pixel-gold)) 75% 10%/40px 15px no-repeat,
                linear-gradient(var(--pixel-blue), var(--pixel-dark)) 0% 100%/100% 60% no-repeat,
                linear-gradient(var(--pixel-dark), var(--pixel-blue)) 0% 0%/100% 40% no-repeat;
        }

        .bg-hallway::before {
            content: "BOARDROOM";
            position: absolute;
            right: 12%;
            top: 12%;
            font-family: 'Press Start 2P', cursive;
            font-size: 6px;
            color: var(--pixel-black);
        }

        .bg-boardroom {
            background:
                linear-gradient(var(--pixel-purple), var(--pixel-blue)) 50% 85%/80% 40px no-repeat,
                linear-gradient(#1a3a5c, #2a5a8c) 50% 15%/70% 50px no-repeat,
                linear-gradient(var(--pixel-purple), var(--pixel-purple)) 50% 15%/74% 54px no-repeat,
                linear-gradient(var(--pixel-dark), var(--pixel-blue)) 0% 0%/100% 100% no-repeat;
        }

        .bg-breakroom {
            background:
                linear-gradient(var(--pixel-gray), var(--pixel-gray)) 85% 60%/30px 50px no-repeat,
                linear-gradient(var(--pixel-purple), var(--pixel-purple)) 85% 55%/35px 10px no-repeat,
                linear-gradient(var(--pixel-green), var(--pixel-dark-green)) 10% 65%/20px 30px no-repeat,
                linear-gradient(var(--pixel-orange), var(--pixel-orange)) 10% 80%/15px 20px no-repeat,
                linear-gradient(var(--pixel-blue), var(--pixel-dark)) 0% 0%/100% 100% no-repeat;
        }

        .scene-characters {
            position: absolute;
            bottom: 20px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 40px;
            align-items: flex-end;
        }

        .pixel-char {
            position: relative;
            width: 48px;
            height: 64px;
        }

        .pixel-char .body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
        }

        .pixel-char .name-tag {
            position: absolute;
            bottom: -18px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Press Start 2P', cursive;
            font-size: 6px;
            color: var(--pixel-cream);
            white-space: nowrap;
        }

        .char-alex .body {
            box-shadow:
                8px -52px 0 #5c4033, 9px -52px 0 #5c4033, 10px -52px 0 #5c4033, 11px -52px 0 #5c4033, 12px -52px 0 #5c4033,
                7px -48px 0 #5c4033, 8px -48px 0 #5c4033, 9px -48px 0 #5c4033, 10px -48px 0 #5c4033, 11px -48px 0 #5c4033, 12px -48px 0 #5c4033, 13px -48px 0 #5c4033,
                8px -44px 0 #f5d0a9, 9px -44px 0 #f5d0a9, 10px -44px 0 #f5d0a9, 11px -44px 0 #f5d0a9, 12px -44px 0 #f5d0a9,
                8px -40px 0 #f5d0a9, 9px -40px 0 #333, 10px -40px 0 #f5d0a9, 11px -40px 0 #333, 12px -40px 0 #f5d0a9,
                8px -36px 0 #f5d0a9, 9px -36px 0 #f5d0a9, 10px -36px 0 #f5d0a9, 11px -36px 0 #f5d0a9, 12px -36px 0 #f5d0a9,
                6px -32px 0 var(--pixel-cyan), 7px -32px 0 var(--pixel-cyan), 8px -32px 0 #fff, 9px -32px 0 var(--pixel-cyan), 10px -32px 0 var(--pixel-cyan), 11px -32px 0 var(--pixel-cyan), 12px -32px 0 #fff, 13px -32px 0 var(--pixel-cyan), 14px -32px 0 var(--pixel-cyan),
                6px -28px 0 var(--pixel-cyan), 7px -28px 0 var(--pixel-cyan), 8px -28px 0 var(--pixel-cyan), 9px -28px 0 var(--pixel-cyan), 10px -28px 0 var(--pixel-cyan), 11px -28px 0 var(--pixel-cyan), 12px -28px 0 var(--pixel-cyan), 13px -28px 0 var(--pixel-cyan), 14px -28px 0 var(--pixel-cyan),
                6px -24px 0 var(--pixel-cyan), 7px -24px 0 var(--pixel-cyan), 8px -24px 0 var(--pixel-cyan), 9px -24px 0 var(--pixel-cyan), 10px -24px 0 var(--pixel-cyan), 11px -24px 0 var(--pixel-cyan), 12px -24px 0 var(--pixel-cyan), 13px -24px 0 var(--pixel-cyan), 14px -24px 0 var(--pixel-cyan),
                7px -16px 0 #2a2a4a, 8px -16px 0 #2a2a4a, 9px -16px 0 #2a2a4a, 10px -16px 0 #2a2a4a, 11px -16px 0 #2a2a4a, 12px -16px 0 #2a2a4a, 13px -16px 0 #2a2a4a,
                7px -12px 0 #2a2a4a, 8px -12px 0 #2a2a4a, 9px -12px 0 #2a2a4a, 10px -12px 0 #1a1a2a, 11px -12px 0 #2a2a4a, 12px -12px 0 #2a2a4a, 13px -12px 0 #2a2a4a,
                7px -4px 0 #222, 8px -4px 0 #222, 9px -4px 0 #222, 11px -4px 0 #222, 12px -4px 0 #222, 13px -4px 0 #222;
            transform: scale(4) translateX(-50%);
        }

        .char-david .body {
            box-shadow:
                7px -52px 0 #3a3a3a, 13px -52px 0 #3a3a3a,
                7px -48px 0 #3a3a3a, 8px -48px 0 #3a3a3a, 12px -48px 0 #3a3a3a, 13px -48px 0 #3a3a3a,
                8px -44px 0 #f5d0a9, 9px -44px 0 #f5d0a9, 10px -44px 0 #f5d0a9, 11px -44px 0 #f5d0a9, 12px -44px 0 #f5d0a9,
                7px -40px 0 #333, 8px -40px 0 #66a, 9px -40px 0 #333, 10px -40px 0 #333, 11px -40px 0 #66a, 12px -40px 0 #333, 13px -40px 0 #333,
                8px -36px 0 #f5d0a9, 9px -36px 0 #f5d0a9, 10px -36px 0 #f5d0a9, 11px -36px 0 #f5d0a9, 12px -36px 0 #f5d0a9,
                6px -32px 0 var(--pixel-green), 7px -32px 0 var(--pixel-green), 8px -32px 0 #fff, 9px -32px 0 var(--pixel-green), 10px -32px 0 var(--pixel-green), 11px -32px 0 var(--pixel-green), 12px -32px 0 #fff, 13px -32px 0 var(--pixel-green), 14px -32px 0 var(--pixel-green),
                6px -28px 0 var(--pixel-green), 7px -28px 0 var(--pixel-green), 8px -28px 0 var(--pixel-green), 9px -28px 0 var(--pixel-green), 10px -28px 0 var(--pixel-green), 11px -28px 0 var(--pixel-green), 12px -28px 0 var(--pixel-green), 13px -28px 0 var(--pixel-green), 14px -28px 0 var(--pixel-green),
                6px -24px 0 var(--pixel-green), 7px -24px 0 var(--pixel-green), 8px -24px 0 var(--pixel-green), 9px -24px 0 var(--pixel-green), 10px -24px 0 var(--pixel-green), 11px -24px 0 var(--pixel-green), 12px -24px 0 var(--pixel-green), 13px -24px 0 var(--pixel-green), 14px -24px 0 var(--pixel-green),
                7px -16px 0 #2a2a2a, 8px -16px 0 #2a2a2a, 9px -16px 0 #2a2a2a, 10px -16px 0 #2a2a2a, 11px -16px 0 #2a2a2a, 12px -16px 0 #2a2a2a, 13px -16px 0 #2a2a2a,
                7px -12px 0 #2a2a2a, 8px -12px 0 #2a2a2a, 9px -12px 0 #2a2a2a, 10px -12px 0 #1a1a1a, 11px -12px 0 #2a2a2a, 12px -12px 0 #2a2a2a, 13px -12px 0 #2a2a2a,
                7px -4px 0 #111, 8px -4px 0 #111, 9px -4px 0 #111, 11px -4px 0 #111, 12px -4px 0 #111, 13px -4px 0 #111;
            transform: scale(4) translateX(-50%);
        }

        .char-sarah .body {
            box-shadow:
                7px -52px 0 #8b4513, 8px -52px 0 #8b4513, 9px -52px 0 #8b4513, 10px -52px 0 #8b4513, 11px -52px 0 #8b4513, 12px -52px 0 #8b4513, 13px -52px 0 #8b4513,
                6px -48px 0 #8b4513, 7px -48px 0 #8b4513, 8px -48px 0 #8b4513, 9px -48px 0 #8b4513, 10px -48px 0 #8b4513, 11px -48px 0 #8b4513, 12px -48px 0 #8b4513, 13px -48px 0 #8b4513, 14px -48px 0 #8b4513,
                8px -44px 0 #f5d0a9, 9px -44px 0 #f5d0a9, 10px -44px 0 #f5d0a9, 11px -44px 0 #f5d0a9, 12px -44px 0 #f5d0a9,
                6px -44px 0 #8b4513, 14px -44px 0 #8b4513,
                8px -40px 0 #f5d0a9, 9px -40px 0 #333, 10px -40px 0 #f5d0a9, 11px -40px 0 #333, 12px -40px 0 #f5d0a9,
                6px -40px 0 #8b4513, 14px -40px 0 #8b4513,
                8px -36px 0 #f5d0a9, 9px -36px 0 #f5d0a9, 10px -36px 0 #c66, 11px -36px 0 #f5d0a9, 12px -36px 0 #f5d0a9,
                6px -36px 0 #8b4513, 14px -36px 0 #8b4513,
                6px -32px 0 var(--pixel-red), 7px -32px 0 var(--pixel-red), 8px -32px 0 var(--pixel-red), 9px -32px 0 var(--pixel-red), 10px -32px 0 var(--pixel-red), 11px -32px 0 var(--pixel-red), 12px -32px 0 var(--pixel-red), 13px -32px 0 var(--pixel-red), 14px -32px 0 var(--pixel-red),
                6px -28px 0 var(--pixel-red), 7px -28px 0 var(--pixel-red), 8px -28px 0 var(--pixel-red), 9px -28px 0 var(--pixel-red), 10px -28px 0 #fff, 11px -28px 0 var(--pixel-red), 12px -28px 0 var(--pixel-red), 13px -28px 0 var(--pixel-red), 14px -28px 0 var(--pixel-red),
                6px -24px 0 var(--pixel-red), 7px -24px 0 var(--pixel-red), 8px -24px 0 var(--pixel-red), 9px -24px 0 var(--pixel-red), 10px -24px 0 var(--pixel-red), 11px -24px 0 var(--pixel-red), 12px -24px 0 var(--pixel-red), 13px -24px 0 var(--pixel-red), 14px -24px 0 var(--pixel-red),
                7px -16px 0 #2a2a3a, 8px -16px 0 #2a2a3a, 9px -16px 0 #2a2a3a, 10px -16px 0 #2a2a3a, 11px -16px 0 #2a2a3a, 12px -16px 0 #2a2a3a, 13px -16px 0 #2a2a3a,
                8px -8px 0 #f5d0a9, 9px -8px 0 #f5d0a9, 11px -8px 0 #f5d0a9, 12px -8px 0 #f5d0a9,
                7px -4px 0 #222, 8px -4px 0 #222, 9px -4px 0 #222, 11px -4px 0 #222, 12px -4px 0 #222, 13px -4px 0 #222;
            transform: scale(4) translateX(-50%);
        }

        .char-maria .body {
            box-shadow:
                8px -52px 0 #1a1a1a, 9px -52px 0 #1a1a1a, 10px -52px 0 #1a1a1a, 11px -52px 0 #1a1a1a, 12px -52px 0 #1a1a1a,
                7px -48px 0 #1a1a1a, 8px -48px 0 #1a1a1a, 9px -48px 0 #1a1a1a, 10px -48px 0 #1a1a1a, 11px -48px 0 #1a1a1a, 12px -48px 0 #1a1a1a, 13px -48px 0 #1a1a1a,
                8px -44px 0 #d4a574, 9px -44px 0 #d4a574, 10px -44px 0 #d4a574, 11px -44px 0 #d4a574, 12px -44px 0 #d4a574,
                8px -40px 0 #d4a574, 9px -40px 0 #333, 10px -40px 0 #d4a574, 11px -40px 0 #333, 12px -40px 0 #d4a574,
                8px -36px 0 #d4a574, 9px -36px 0 #d4a574, 10px -36px 0 #c66, 11px -36px 0 #d4a574, 12px -36px 0 #d4a574,
                6px -32px 0 var(--pixel-orange), 7px -32px 0 var(--pixel-orange), 8px -32px 0 var(--pixel-orange), 9px -32px 0 var(--pixel-orange), 10px -32px 0 #fff, 11px -32px 0 var(--pixel-orange), 12px -32px 0 var(--pixel-orange), 13px -32px 0 var(--pixel-orange), 14px -32px 0 var(--pixel-orange),
                6px -28px 0 var(--pixel-orange), 7px -28px 0 var(--pixel-orange), 8px -28px 0 var(--pixel-orange), 9px -28px 0 var(--pixel-orange), 10px -28px 0 var(--pixel-orange), 11px -28px 0 var(--pixel-orange), 12px -28px 0 var(--pixel-orange), 13px -28px 0 var(--pixel-orange), 14px -28px 0 var(--pixel-orange),
                6px -24px 0 var(--pixel-orange), 7px -24px 0 var(--pixel-orange), 8px -24px 0 var(--pixel-orange), 9px -24px 0 var(--pixel-orange), 10px -24px 0 var(--pixel-orange), 11px -24px 0 var(--pixel-orange), 12px -24px 0 var(--pixel-orange), 13px -24px 0 var(--pixel-orange), 14px -24px 0 var(--pixel-orange),
                7px -16px 0 #1a1a2a, 8px -16px 0 #1a1a2a, 9px -16px 0 #1a1a2a, 10px -16px 0 #1a1a2a, 11px -16px 0 #1a1a2a, 12px -16px 0 #1a1a2a, 13px -16px 0 #1a1a2a,
                7px -12px 0 #1a1a2a, 8px -12px 0 #1a1a2a, 9px -12px 0 #1a1a2a, 10px -12px 0 #0a0a1a, 11px -12px 0 #1a1a2a, 12px -12px 0 #1a1a2a, 13px -12px 0 #1a1a2a,
                7px -4px 0 #111, 8px -4px 0 #111, 9px -4px 0 #111, 11px -4px 0 #111, 12px -4px 0 #111, 13px -4px 0 #111;
            transform: scale(4) translateX(-50%);
        }

        .char-tom .body {
            box-shadow:
                8px -52px 0 #888, 9px -52px 0 #888, 10px -52px 0 #888, 11px -52px 0 #888, 12px -52px 0 #888,
                7px -48px 0 #888, 8px -48px 0 #888, 9px -48px 0 #888, 10px -48px 0 #888, 11px -48px 0 #888, 12px -48px 0 #888, 13px -48px 0 #888,
                8px -44px 0 #f5d0a9, 9px -44px 0 #f5d0a9, 10px -44px 0 #f5d0a9, 11px -44px 0 #f5d0a9, 12px -44px 0 #f5d0a9,
                8px -40px 0 #f5d0a9, 9px -40px 0 #333, 10px -40px 0 #f5d0a9, 11px -40px 0 #333, 12px -40px 0 #f5d0a9,
                8px -36px 0 #666, 9px -36px 0 #666, 10px -36px 0 #f5d0a9, 11px -36px 0 #666, 12px -36px 0 #666,
                6px -32px 0 var(--pixel-gray), 7px -32px 0 var(--pixel-gray), 8px -32px 0 #fff, 9px -32px 0 var(--pixel-gray), 10px -32px 0 var(--pixel-gray), 11px -32px 0 var(--pixel-gray), 12px -32px 0 #fff, 13px -32px 0 var(--pixel-gray), 14px -32px 0 var(--pixel-gray),
                6px -28px 0 var(--pixel-gray), 7px -28px 0 var(--pixel-gray), 8px -28px 0 var(--pixel-gray), 9px -28px 0 var(--pixel-gray), 10px -28px 0 var(--pixel-gray), 11px -28px 0 var(--pixel-gray), 12px -28px 0 var(--pixel-gray), 13px -28px 0 var(--pixel-gray), 14px -28px 0 var(--pixel-gray),
                6px -24px 0 var(--pixel-gray), 7px -24px 0 var(--pixel-gray), 8px -24px 0 var(--pixel-gray), 9px -24px 0 var(--pixel-gray), 10px -24px 0 var(--pixel-gray), 11px -24px 0 var(--pixel-gray), 12px -24px 0 var(--pixel-gray), 13px -24px 0 var(--pixel-gray), 14px -24px 0 var(--pixel-gray),
                7px -16px 0 #3a3a3a, 8px -16px 0 #3a3a3a, 9px -16px 0 #3a3a3a, 10px -16px 0 #3a3a3a, 11px -16px 0 #3a3a3a, 12px -16px 0 #3a3a3a, 13px -16px 0 #3a3a3a,
                7px -12px 0 #3a3a3a, 8px -12px 0 #3a3a3a, 9px -12px 0 #3a3a3a, 10px -12px 0 #2a2a2a, 11px -12px 0 #3a3a3a, 12px -12px 0 #3a3a3a, 13px -12px 0 #3a3a3a,
                7px -4px 0 #222, 8px -4px 0 #222, 9px -4px 0 #222, 11px -4px 0 #222, 12px -4px 0 #222, 13px -4px 0 #222;
            transform: scale(4) translateX(-50%);
        }

        .char-roger .body {
            box-shadow:
                8px -52px 0 #ccc, 9px -52px 0 #ccc, 10px -52px 0 #ccc, 11px -52px 0 #ccc, 12px -52px 0 #ccc,
                7px -48px 0 #ccc, 8px -48px 0 #ccc, 9px -48px 0 #ccc, 10px -48px 0 #ccc, 11px -48px 0 #ccc, 12px -48px 0 #ccc, 13px -48px 0 #ccc,
                8px -44px 0 #f5d0a9, 9px -44px 0 #f5d0a9, 10px -44px 0 #f5d0a9, 11px -44px 0 #f5d0a9, 12px -44px 0 #f5d0a9,
                8px -40px 0 #f5d0a9, 9px -40px 0 #333, 10px -40px 0 #f5d0a9, 11px -40px 0 #333, 12px -40px 0 #f5d0a9,
                8px -36px 0 #f5d0a9, 9px -36px 0 #f5d0a9, 10px -36px 0 #f5d0a9, 11px -36px 0 #f5d0a9, 12px -36px 0 #f5d0a9,
                6px -32px 0 #2a2a3a, 7px -32px 0 #2a2a3a, 8px -32px 0 #fff, 9px -32px 0 #2a2a3a, 10px -32px 0 var(--pixel-gold), 11px -32px 0 #2a2a3a, 12px -32px 0 #fff, 13px -32px 0 #2a2a3a, 14px -32px 0 #2a2a3a,
                6px -28px 0 #2a2a3a, 7px -28px 0 #2a2a3a, 8px -28px 0 #2a2a3a, 9px -28px 0 #2a2a3a, 10px -28px 0 var(--pixel-gold), 11px -28px 0 #2a2a3a, 12px -28px 0 #2a2a3a, 13px -28px 0 #2a2a3a, 14px -28px 0 #2a2a3a,
                6px -24px 0 #2a2a3a, 7px -24px 0 #2a2a3a, 8px -24px 0 #2a2a3a, 9px -24px 0 #2a2a3a, 10px -24px 0 var(--pixel-gold), 11px -24px 0 #2a2a3a, 12px -24px 0 #2a2a3a, 13px -24px 0 #2a2a3a, 14px -24px 0 #2a2a3a,
                7px -16px 0 #1a1a2a, 8px -16px 0 #1a1a2a, 9px -16px 0 #1a1a2a, 10px -16px 0 #1a1a2a, 11px -16px 0 #1a1a2a, 12px -16px 0 #1a1a2a, 13px -16px 0 #1a1a2a,
                7px -12px 0 #1a1a2a, 8px -12px 0 #1a1a2a, 9px -12px 0 #1a1a2a, 10px -12px 0 #0a0a1a, 11px -12px 0 #1a1a2a, 12px -12px 0 #1a1a2a, 13px -12px 0 #1a1a2a,
                7px -4px 0 #111, 8px -4px 0 #111, 9px -4px 0 #111, 11px -4px 0 #111, 12px -4px 0 #111, 13px -4px 0 #111;
            transform: scale(4) translateX(-50%);
        }

        .pixel-char.speaking {
            animation: charBounce 0.3s step-end infinite alternate;
        }

        @keyframes charBounce {
            to { transform: translateY(-4px); }
        }

        .scene-label {
            position: absolute;
            top: 8px;
            left: 8px;
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            color: var(--pixel-yellow);
            background: var(--pixel-black);
            padding: 4px 8px;
            border: 2px solid var(--pixel-purple);
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            body { font-size: 16px; padding: 10px; }
            #game-container { padding: 16px; }
            #title-screen h1 { font-size: 1em; }
            .player-profile { width: 100px; }
            .score-bar-fill { width: 100px; }
            .character { min-width: 60px; }
        }

        /* ========== UTILITY ========== */
        .hidden { display: none !important; }

        ::-webkit-scrollbar { width: 12px; }
        ::-webkit-scrollbar-track { background: var(--pixel-black); border: 2px solid var(--pixel-blue); }
        ::-webkit-scrollbar-thumb { background: var(--pixel-purple); border: 2px solid var(--pixel-blue); }
    
    </style>
</head>
<body>
    <div id="game-container">
        <!-- TITLE SCREEN -->
        <div id="title-screen">
            <h1>üè¢ SNAPPLE BOARDROOM SURVIVAL</h1>
            <div class="subtitle">A Leadership & Influence Game</div>
            
            <div class="story-intro">
                <h3>üìã Your Mission</h3>
                <p><strong>You are Alex</strong>, newly appointed <strong>VP of Innovation</strong> at Snapple.</p>
                <p style="margin-top: 15px;">Quaker Oats just acquired Snapple for <strong>$1.7 billion</strong>, but shareholders are furious‚Äîthey think the price was too high. Snapple's profits have dropped 70%, and the pressure is intense.</p>
                <p style="margin-top: 15px;">CEO Roger has called an emergency board meeting. Every VP must present a strategy to turn things around. Your proposal: launch a <strong>Snapple Sports Drink</strong> to dominate the "New Age Drink Market."</p>
                <p style="margin-top: 15px; color: #f39c12;"><strong>But here's the catch:</strong> You need to navigate boardroom politics, build alliances, and convince other VPs to support your vision. One wrong move and you could be fired.</p>
                <p style="margin-top: 15px; color: #2ecc71;">Can you survive and become a leader? Or will you be the next casualty?</p>
            </div>

            <button class="start-button" onclick="showMeetPlayers()">MEET THE PLAYERS üë•</button>
        </div>

        <!-- MEET THE PLAYERS SCREEN -->
        <div id="meet-players-screen" class="hidden">
            <h2>üé≠ Meet The Players</h2>
            <p class="instruction">Click on each character to learn about them</p>
            
            <div class="players-container">
                <!-- Alex -->
                <div class="player-profile alex" onclick="showPlayerDetail('alex')">
                    <span class="player-profile-icon">üí°</span>
                    <div class="player-profile-name">Alex</div>
                    <div class="player-profile-title">VP Innovation</div>
                    <div class="player-profile-hint">(You)</div>
                </div>

                <!-- David -->
                <div class="player-profile david" onclick="showPlayerDetail('david')">
                    <span class="player-profile-icon">üí∞</span>
                    <div class="player-profile-name">David</div>
                    <div class="player-profile-title">VP Finance</div>
                    <div class="player-profile-hint">Click to learn more</div>
                </div>

                <!-- Sarah -->
                <div class="player-profile sarah" onclick="showPlayerDetail('sarah')">
                    <span class="player-profile-icon">üìä</span>
                    <div class="player-profile-name">Sarah</div>
                    <div class="player-profile-title">VP Marketing</div>
                    <div class="player-profile-hint">Click to learn more</div>
                </div>

                <!-- Maria -->
                <div class="player-profile maria" onclick="showPlayerDetail('maria')">
                    <span class="player-profile-icon">üéØ</span>
                    <div class="player-profile-name">Maria</div>
                    <div class="player-profile-title">VP Sales</div>
                    <div class="player-profile-hint">Click to learn more</div>
                </div>

                <!-- Tom -->
                <div class="player-profile tom" onclick="showPlayerDetail('tom')">
                    <span class="player-profile-icon">üè≠</span>
                    <div class="player-profile-name">Tom</div>
                    <div class="player-profile-title">VP Production</div>
                    <div class="player-profile-hint">Click to learn more</div>
                </div>

                <!-- Roger -->
                <div class="player-profile roger" onclick="showPlayerDetail('roger')">
                    <span class="player-profile-icon">üëî</span>
                    <div class="player-profile-name">Roger</div>
                    <div class="player-profile-title">CEO</div>
                    <div class="player-profile-hint">Click to learn more</div>
                </div>
            </div>

            <button class="continue-to-game-button" onclick="startGame()">START THE GAME üöÄ</button>
        </div>

        <!-- Player Detail Modal -->
        <div id="player-modal" class="player-modal">
            <div id="player-modal-content" class="player-modal-content">
                <button class="player-modal-close" onclick="closePlayerDetail()">‚úï</button>
                <div id="player-modal-body"></div>
            </div>
        </div>

        <!-- GAME SCREEN -->
        <div id="game-screen" class="hidden">
            <!-- Score Bar -->
            <div id="score-bar">
                <div class="score-item">
                    <span class="score-label">üìä Credibility:</span>
                    <div class="score-bar-fill">
                        <div id="credibility-bar" class="score-bar-inner" style="width: 50%;"></div>
                    </div>
                    <span id="credibility-value">50/100</span>
                </div>
                <div class="score-item">
                    <span class="score-label">ü§ù Allies:</span>
                    <span id="allies-list" class="allies-list">None yet</span>
                </div>
                <div class="score-item">
                    <span class="score-label">‚ö° Political Savvy:</span>
                    <div class="score-bar-fill">
                        <div id="savvy-bar" class="score-bar-inner" style="width: 50%;"></div>
                    </div>
                    <span id="savvy-value">50/100</span>
                </div>
            </div>

            <!-- Dialogue Box -->
            <div id="dialogue-box">
                <div class="speaker-name" id="speaker-name"></div>
                <div class="dialogue-text" id="dialogue-text"></div>
                <div class="dialogue-emotion" id="dialogue-emotion"></div>
            </div>


            <!-- Scene Illustration -->
            <div id="scene-illustration">
                <div class="scene-label" id="scene-location">HALLWAY</div>
                <div class="scene-bg bg-hallway" id="scene-bg"></div>
                <div class="scene-characters" id="scene-chars"></div>
            </div>
            <!-- Characters -->
            <div id="characters">
                <div class="character alex active" data-character="alex">
                    <span class="character-icon">üí°</span>
                    <div class="character-name">Alex Chen</div>
                    <div class="character-title">VP Innovation</div>
                    <div class="character-emotion" id="alex-emotion"></div>
                </div>
                <div class="character david" data-character="david">
                    <span class="character-icon">üí∞</span>
                    <div class="character-name">David</div>
                    <div class="character-title">VP Finance</div>
                    <div class="character-emotion" id="david-emotion"></div>
                </div>
                <div class="character sarah" data-character="sarah">
                    <span class="character-icon">üìä</span>
                    <div class="character-name">Sarah</div>
                    <div class="character-title">VP Marketing</div>
                    <div class="character-emotion" id="sarah-emotion"></div>
                </div>
                <div class="character maria" data-character="maria">
                    <span class="character-icon">üéØ</span>
                    <div class="character-name">Maria</div>
                    <div class="character-title">VP Sales</div>
                    <div class="character-emotion" id="maria-emotion"></div>
                </div>
                <div class="character tom" data-character="tom">
                    <span class="character-icon">üè≠</span>
                    <div class="character-name">Tom</div>
                    <div class="character-title">VP Production</div>
                    <div class="character-emotion" id="tom-emotion"></div>
                </div>
                <div class="character roger" data-character="roger">
                    <span class="character-icon">üëî</span>
                    <div class="character-name">Roger</div>
                    <div class="character-title">CEO</div>
                    <div class="character-emotion" id="roger-emotion"></div>
                </div>
            </div>

            <!-- Choices -->
            <div id="choices"></div>

            <!-- Continue Button -->
            <button id="continue-button" onclick="continueStory()">Continue ‚Üí</button>
        </div>

        <!-- ENDING SCREEN -->
        <div id="ending-screen" class="hidden">
            <h2 class="ending-title" id="ending-title"></h2>
            <div class="ending-content" id="ending-content"></div>
            <div class="what-happened-next" id="what-happened-next"></div>
            <div class="leadership-tips" id="leadership-tips"></div>
            <div class="course-connection" id="course-connection"></div>
            <div class="final-scores" id="final-scores"></div>
            <button class="restart-button" onclick="location.reload()">Play Again üîÑ</button>
        </div>
    </div>

    <script>
        // ========== GAME STATE ==========
        let gameState = {
            currentScene: 0,
            credibility: 50,
            politicalSavvy: 50,
            allies: [],
            choices: {},
            characterEmotions: {
                alex: '',
                david: 'üòê',
                sarah: 'üòê',
                maria: 'üòê',
                tom: 'üòê',
                roger: 'üòê'
            }
        };

        // ========== CHARACTER DATA ==========
        const characters = {
            alex: { name: "Alex", title: "VP Innovation", icon: "üí°" },
            david: { name: "David", title: "VP Finance", icon: "üí∞" },
            sarah: { name: "Sarah", title: "VP Marketing", icon: "üìä" },
            maria: { name: "Maria", title: "VP Sales", icon: "üéØ" },
            tom: { name: "Tom", title: "VP Production", icon: "üè≠" },
            roger: { name: "Roger", title: "CEO", icon: "üëî" }
        };

        // ========== CHARACTER PROFILES ==========
        const characterProfiles = {
            alex: {
                background: "You were just promoted to VP of Innovation 3 months ago. Fresh MBA from NYU Stern. You came from management consulting and have a reputation for analytical thinking and bold ideas. This is your first executive-level position.",
                personality: "Ambitious, strategic, confident. You believe in data-driven decision making but also trust your instincts. You're still learning how to navigate corporate politics at this level.",
                motivation: "You want to prove yourself. This Sports Drink proposal is your chance to make your mark and show that Quaker made the right choice in acquiring Snapple. You need allies to make it happen.",
                strengths: "Strategic thinking, presentation skills, innovation mindset",
                weaknesses: "Limited political capital, new to the executive team, unproven track record at Snapple",
                whatTheyWant: "Launch the Sports Drink successfully and establish yourself as a key leader"
            },
            david: {
                background: "15 years at Quaker Oats before the acquisition. CPA with an MBA from Wharton. Known as 'the numbers guy.' Deeply skeptical of risky investments. Has Roger's ear on financial matters.",
                personality: "Conservative, risk-averse, analytical. Doesn't trust 'vision' without hard data. Tends to say 'no' first and 'maybe' later. Respected but not always liked.",
                motivation: "Protect Quaker's investment. The $1.7B acquisition already looks expensive‚Äîhe doesn\'t want to make it worse. He's under pressure from Quaker's board to control costs.",
                strengths: "Financial expertise, relationship with CEO, credibility with board",
                weaknesses: "Seen as too cautious, resists innovation, can be inflexible",
                whatTheyWant: "Cut costs by 20% across all departments and prove financial discipline"
            },
            sarah: {
                background: "Former VP of Marketing at Gemini (the company Snapple acquired). Nervous about her job security. She's creative and talented but feels like an outsider in the new organization.",
                personality: "Creative, insecure, people-pleasing. Wants to be liked. Tends to agree with whoever spoke last in meetings. Skilled marketer but not politically savvy.",
                motivation: "Keep her job. Prove she deserves to be here. She thinks a big, flashy marketing campaign will make her indispensable. But she's afraid to take strong positions.",
                strengths: "Marketing expertise, creative ideas, good relationship with ad agencies",
                weaknesses: "Lacks confidence, politically weak, afraid of conflict",
                whatTheyWant: "Launch a celebrity endorsement campaign and secure her position"
            },
            maria: {
                background: "Sales veteran. 20 years in beverage industry. Worked her way up from regional sales rep. Practical, street-smart, results-oriented. Doesn't have an MBA and is proud of it.",
                personality: "Aggressive, competitive, impatient with 'corporate BS.' Believes in her gut and her relationships with distributors. Can be abrasive but gets results.",
                motivation: "Hit her sales targets. The acquisition chaos has hurt sales‚Äîshe needs a quick win. She thinks lower prices will boost volume fast. Doesn't care about 'brand positioning.'",
                strengths: "Deep distributor relationships, sales expertise, practical mindset",
                weaknesses: "Short-term focus, dismissive of others' ideas, can be combative",
                whatTheyWant: "Cut prices by 15% and flood the market with volume"
            },
            tom: {
                background: "30 years in beverage production. Started as a plant manager, now oversees all manufacturing. Engineering degree. Quiet, competent, respected by everyone. The 'adult in the room.'",
                personality: "Pragmatic, detail-oriented, calm. Asks good questions. Doesn't play politics but commands respect. Values quality and efficiency. Protective of his production team.",
                motivation: "Keep production running smoothly. He's tired of executives making promises without understanding operational constraints. He wants decisions that are actually executable.",
                strengths: "Technical expertise, respect from all VPs, operational credibility",
                weaknesses: "Doesn't self-promote, can be too cautious about change",
                whatTheyWant: "Maintain quality standards and protect his team from unrealistic demands"
            },
            roger: {
                background: "New CEO (6 months). Former Gemini CEO who became Snapple CEO after the acquisition. MBA from Harvard. Under intense pressure from Quaker's board and shareholders. His job is at risk.",
                personality: "Professional, strategic, but insecure. Trying to look decisive while actually unsure. Wants to make the 'right' decision but doesn\'t know what that is. Watching everyone carefully.",
                motivation: "Survive. He needs to turn Snapple around in 12 months or he's out. He's looking for someone to rally behind‚Äîa VP who can unite the team and deliver results. He's testing everyone.",
                strengths: "Positional authority, strategic thinking, board relationships",
                weaknesses: "Job insecurity, doesn\'t know who to trust, indecisive",
                whatTheyWant: "Find a strategy that works and a leader he can trust to execute it"
            }
        };

        // ========== MEET PLAYERS FUNCTIONS ==========

        // ========== SCENE ILLUSTRATIONS ==========
        const sceneIllustrations = {
            0: { bg: 'hallway', location: 'HALLWAY', chars: ['alex', 'sarah'] },
            1: { bg: 'hallway', location: 'HALLWAY', chars: ['alex', 'sarah'] },
            2: { bg: 'hallway', location: 'HALLWAY', chars: ['alex', 'sarah'] },
            3: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex'] },
            4: { bg: 'hallway', location: 'HALLWAY', chars: ['alex', 'sarah'] },
            5: { bg: 'hallway', location: 'HALLWAY', chars: ['alex', 'sarah'] },
            6: { bg: 'boardroom', location: 'BOARDROOM', chars: ['roger', 'alex'] },
            7: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex'] },
            8: { bg: 'boardroom', location: 'BOARDROOM', chars: ['roger', 'alex'] },
            9: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex', 'david', 'tom'] },
            10: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex', 'david', 'roger'] },
            11: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex', 'david'] },
            12: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex', 'maria'] },
            13: { bg: 'boardroom', location: 'BOARDROOM', chars: ['david', 'alex'] },
            14: { bg: 'boardroom', location: 'BOARDROOM', chars: ['david', 'alex'] },
            15: { bg: 'boardroom', location: 'BOARDROOM', chars: ['david', 'alex', 'roger'] },
            16: { bg: 'boardroom', location: 'BOARDROOM', chars: ['tom', 'alex', 'david'] },
            17: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex', 'david', 'roger'] },
            18: { bg: 'boardroom', location: 'BOARDROOM', chars: ['sarah', 'alex'] },
            19: { bg: 'boardroom', location: 'BOARDROOM', chars: ['sarah'] },
            20: { bg: 'boardroom', location: 'BOARDROOM', chars: ['roger', 'alex'] },
            21: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex', 'sarah'] },
            22: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex', 'roger'] },
            23: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex', 'roger'] },
            24: { bg: 'boardroom', location: 'BOARDROOM', chars: ['alex', 'tom'] },
            25: { bg: 'breakroom', location: 'BREAK ROOM', chars: ['alex'] },
            26: { bg: 'breakroom', location: 'BREAK ROOM', chars: ['alex'] },
            27: { bg: 'breakroom', location: 'BREAK ROOM', chars: ['alex', 'david'] },
            28: { bg: 'breakroom', location: 'BREAK ROOM', chars: ['alex', 'maria'] },
            29: { bg: 'breakroom', location: 'BREAK ROOM', chars: ['alex', 'tom'] },
            30: { bg: 'breakroom', location: 'BREAK ROOM', chars: ['alex', 'roger'] },
            31: { bg: 'boardroom', location: 'BOARDROOM', chars: ['roger', 'alex', 'david', 'sarah'] },
            32: { bg: 'boardroom', location: 'BOARDROOM', chars: ['roger', 'alex'] },
            33: { bg: 'boardroom', location: 'BOARDROOM', chars: ['roger', 'alex', 'david', 'sarah', 'tom'] }
        };

        function createPixelChar(name) {
            var div = document.createElement('div');
            div.className = 'pixel-char char-' + name;
            div.id = 'pixel-' + name;
            div.innerHTML = '<div class="body"></div><div class="name-tag">' + name.toUpperCase() + '</div>';
            return div;
        }

        function updateSceneIllustration(sceneIndex) {
            var illustration = sceneIllustrations[sceneIndex] || sceneIllustrations[0];
            var sceneBg = document.getElementById('scene-bg');
            var sceneChars = document.getElementById('scene-chars');
            var sceneLocation = document.getElementById('scene-location');
            
            sceneBg.className = 'scene-bg bg-' + illustration.bg;
            sceneLocation.textContent = illustration.location;
            
            sceneChars.innerHTML = '';
            illustration.chars.forEach(function(charName) {
                var charEl = createPixelChar(charName);
                sceneChars.appendChild(charEl);
            });
            
            var scene = scenes[sceneIndex];
            if (scene && scene.speaker && scene.speaker !== 'narrator') {
                var speakingChar = document.getElementById('pixel-' + scene.speaker);
                if (speakingChar) {
                    speakingChar.classList.add('speaking');
                }
            }
        }

        function showMeetPlayers() {
            document.getElementById('title-screen').classList.add('hidden');
            document.getElementById('meet-players-screen').classList.add('hidden');
            document.getElementById('meet-players-screen').classList.add('hidden');
            document.getElementById('meet-players-screen').classList.remove('hidden');
        }

        function showPlayerDetail(playerName) {
            const profile = characterProfiles[playerName];
            const char = characters[playerName];
            
            const modalBody = document.getElementById('player-modal-body');
            modalBody.innerHTML = `
                <div class="player-modal-header">
                    <div class="player-modal-icon">${char.icon}</div>
                    <div class="player-modal-name">${char.name}</div>
                    <div class="player-modal-title">${char.title}</div>
                </div>
                
                <div class="player-modal-section ${playerName}">
                    <h4>üìã Background</h4>
                    <p>${profile.background}</p>
                </div>
                
                <div class="player-modal-section ${playerName}">
                    <h4>üé≠ Personality</h4>
                    <p>${profile.personality}</p>
                </div>
                
                <div class="player-modal-section ${playerName}">
                    <h4>üéØ Motivation</h4>
                    <p>${profile.motivation}</p>
                </div>
                
                <div class="player-modal-section ${playerName}">
                    <h4>üí™ Strengths</h4>
                    <p>${profile.strengths}</p>
                </div>
                
                <div class="player-modal-section ${playerName}">
                    <h4>‚ö†Ô∏è Weaknesses</h4>
                    <p>${profile.weaknesses}</p>
                </div>
                
                <div class="player-modal-section ${playerName}">
                    <h4>üéÅ What They Want</h4>
                    <p>${profile.whatTheyWant}</p>
                </div>
            `;
            
            const modalContent = document.getElementById('player-modal-content');
            modalContent.className = 'player-modal-content ' + playerName;
            
            document.getElementById('player-modal').classList.add('active');
            
            // Mark profile as viewed
            document.querySelector(`.player-profile.${playerName}`).classList.add('viewed');
        }

        function closePlayerDetail() {
            document.getElementById('player-modal').classList.remove('active');
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('player-modal');
            if (event.target === modal) {
                closePlayerDetail();
            }
        });

        // ========== STORY SCENES ==========
        const scenes = [
            // Scene 0: Pre-meeting hallway
            {
                speaker: "narrator",
                text: "You're in the hallway outside the boardroom. In 5 minutes, you'll present your Sports Drink proposal to the executive team. Your heart is racing.",
                emotion: "",
                choices: [
                    {
                        label: "A) ü§ù Approach Sarah (VP Marketing)",
                        text: "Ask Sarah: 'What are you planning to propose today?'",
                        description: "Try to gather information",
                        next: 1,
                        effects: { credibility: 0, politicalSavvy: 5 }
                    },
                    {
                        label: "B) üéØ Approach Sarah strategically",
                        text: "Say to Sarah: 'I think we should join forces in the meeting.'",
                        description: "Attempt to build an early alliance",
                        next: 2,
                        effects: { credibility: 5, politicalSavvy: 5 }
                    },
                    {
                        label: "C) üòé Stay neutral",
                        text: "Just smile and nod politely, then enter the boardroom",
                        description: "Play it safe, observe first",
                        next: 3,
                        effects: { credibility: 0, politicalSavvy: 0 }
                    }
                ]
            },

            // Scene 1: Sarah responds - Information gathering
            {
                speaker: "sarah",
                text: "Oh, hi Alex. I'm... not sure yet. Roger wants aggressive ideas. I'm thinking about celebrity athlete endorsements for our existing teas. What about you?",
                emotion: "üò∞ Sarah looks nervous",
                setEmotion: { sarah: "üò∞" },
                choices: [
                    {
                        label: "A) Share your full plan",
                        text: "I'm proposing a new Sports Drink line. Want to coordinate?",
                        description: "Be transparent and collaborative",
                        next: 4,
                        effects: { credibility: 5, politicalSavvy: 5 },
                        addAlly: "sarah"
                    },
                    {
                        label: "B) Stay vague",
                        text: "I'm still working out the details. Let's see how the meeting goes.",
                        description: "Keep your cards close",
                        next: 5,
                        effects: { credibility: -5, politicalSavvy: 5 }
                    }
                ]
            },

            // Scene 2: Sarah responds - Alliance attempt
            {
                speaker: "sarah",
                text: "Join forces? I... I guess that depends on what you're proposing. I'm thinking celebrity endorsements. What's your idea?",
                emotion: "ü§î Sarah is intrigued but cautious",
                setEmotion: { sarah: "ü§î" },
                choices: [
                    {
                        label: "A) Pitch synergy",
                        text: "I'm launching a Sports Drink. Your endorsements + my product = perfect combo!",
                        description: "Show how you can work together",
                        next: 4,
                        effects: { credibility: 10, politicalSavvy: 10 },
                        addAlly: "sarah"
                    },
                    {
                        label: "B) Disagree politely",
                        text: "Actually, I think we need a new product, not just marketing. Let's discuss inside.",
                        description: "Be honest about your difference",
                        next: 5,
                        effects: { credibility: 5, politicalSavvy: 0 }
                    }
                ]
            },

            // Scene 3: Neutral entry
            {
                speaker: "narrator",
                text: "You walk into the boardroom. Everyone is already seated. Roger sits at the head of the table, looking stern. The tension is palpable.",
                emotion: "",
                next: 6
            },

            // Scene 4: Sarah becomes ally
            {
                speaker: "sarah",
                text: "That... actually makes sense. Celebrity athletes promoting a sports drink. Okay, I'm in. Let's support each other in there.",
                emotion: "üòä Sarah smiles - Alliance formed!",
                setEmotion: { sarah: "üòä" },
                next: 6
            },

            // Scene 5: Sarah stays neutral
            {
                speaker: "sarah",
                text: "Okay... well, good luck in there. May the best idea win.",
                emotion: "üòê Sarah stays professional but distant",
                setEmotion: { sarah: "üòê" },
                next: 6
            },

            // Scene 6: Meeting begins - Roger's opening
            {
                speaker: "roger",
                text: "Alright everyone, let's get started. You all know why we're here. Snapple's Q3 profits are down 70%. Shareholders are calling for heads to roll. I need bold solutions. Each of you will present your strategy. Alex, you're first.",
                emotion: "üò† Roger is clearly under pressure",
                setEmotion: { roger: "üò†" },
                next: 7
            },

            // Scene 7: Your opening pitch
            {
                speaker: "alex",
                text: "Thank you, Roger. My proposal is to launch Snapple Sports Drink. The sports drink market is exploding‚ÄîGatorade dominates, but there's room for a premium, all-natural alternative. We can leverage Snapple's 'healthy beverage' brand.",
                emotion: "You deliver your pitch confidently",
                setEmotion: { alex: "üòé", david: "ü§®", tom: "ü§î", maria: "ü§î" },
                next: 8
            },

            // Scene 8: Roger's cost question
            {
                speaker: "roger",
                text: "Interesting. How much will this cost us?",
                emotion: "Roger leans forward, listening intently",
                setEmotion: { roger: "ü§î" },
                choices: [
                    {
                        label: "A) üí∞ Be honest about investment",
                        text: "We'll need significant investment upfront, but the long-term ROI is substantial.",
                        description: "Honest but risky - David won\'t like this",
                        next: 9,
                        effects: { credibility: 10, politicalSavvy: -5 },
                        setEmotions: { david: "üò†", roger: "ü§î" }
                    },
                    {
                        label: "B) üéØ Conservative approach",
                        text: "I can launch a limited pilot with existing budget. Test the market first.",
                        description: "Safe but less ambitious",
                        next: 10,
                        effects: { credibility: 5, politicalSavvy: 5 },
                        setEmotions: { david: "üòê", roger: "üòê" }
                    },
                    {
                        label: "C) ü§ù Defer to Finance",
                        text: "Let me hear David's thoughts on budget first. I want this to be a team decision.",
                        description: "Build relationship with Finance VP",
                        next: 11,
                        effects: { credibility: 5, politicalSavvy: 10 },
                        setEmotions: { david: "üòä" }
                    },
                    {
                        label: "D) ‚öîÔ∏è Attack competitor's idea",
                        text: "Whatever it costs, it's better than Maria's 'race to the bottom' price cuts.",
                        description: "Aggressive - make an enemy",
                        next: 12,
                        effects: { credibility: -10, politicalSavvy: -10 },
                        setEmotions: { maria: "üò°", roger: "üò†" }
                    }
                ]
            },

            // Scene 9: Honest investment path
            {
                speaker: "narrator",
                text: "David shifts in his seat uncomfortably. You can see he's preparing to object. Tom nods thoughtfully‚Äîhe seems to appreciate your honesty.",
                emotion: "",
                setEmotion: { tom: "üòä" },
                next: 13
            },

            // Scene 10: Conservative path
            {
                speaker: "narrator",
                text: "Roger nods slowly. David looks slightly appeased. It's not exciting, but it's safe. Tom seems unimpressed with the cautious approach.",
                emotion: "",
                setEmotion: { tom: "üòê" },
                next: 13
            },

            // Scene 11: Defer to David path
            {
                speaker: "david",
                text: "I appreciate that, Alex. Look, I'm not against innovation. I just need to see the numbers make sense. If we can structure this smartly, I'm open to discussing it.",
                emotion: "üòä David seems pleasantly surprised by your respect",
                setEmotion: { david: "üòä" },
                effects: { credibility: 5 },
                addAlly: "david",
                next: 13
            },

            // Scene 12: Attack Maria path (BAD CHOICE)
            {
                speaker: "maria",
                text: "Excuse me? My pricing strategy is based on market data. At least I'm not asking us to gamble on an unproven product category!",
                emotion: "üò° Maria is furious. The room feels tense.",
                setEmotion: { maria: "üò°", roger: "üò†", sarah: "üò∞", tom: "üòê", david: "üò†" },
                effects: { credibility: -10 },
                next: 13
            },

            // Scene 13: David's objection
            {
                speaker: "david",
                text: "Roger, with all due respect to Alex, we need to cut costs, not add new product lines. Alex's plan is too risky. We're hemorrhaging money and this could make it worse.",
                emotion: "üò† David is challenging you directly",
                setEmotion: { david: "üò†" },
                choices: [
                    {
                        label: "A) ü§ù Find common ground",
                        text: "David, you're right about costs. What if we can prove ROI within 6 months?",
                        description: "Seek compromise - bridge the gap",
                        next: 14,
                        effects: { credibility: 10, politicalSavvy: 15 },
                        setEmotions: { david: "ü§î" }
                    },
                    {
                        label: "B) ‚öîÔ∏è Direct confrontation",
                        text: "Cutting costs will destroy Snapple's premium brand. We need growth, not shrinkage.",
                        description: "Stand your ground - make David an enemy",
                        next: 15,
                        effects: { credibility: 5, politicalSavvy: -10 },
                        setEmotions: { david: "üò°", roger: "üòê" }
                    },
                    {
                        label: "C) üéØ Rally Tom (Production)",
                        text: "Tom, from a production standpoint, can we do this efficiently?",
                        description: "Pull in an ally",
                        next: 16,
                        effects: { credibility: 5, politicalSavvy: 10 },
                        addAlly: "tom"
                    },
                    {
                        label: "D) üí° Combine strategies",
                        text: "What if we merge my Sports Drink with David's cost controls? Lean startup approach.",
                        description: "Offer a trade - show flexibility",
                        next: 17,
                        effects: { credibility: 15, politicalSavvy: 15 },
                        addAlly: "david"
                    }
                ]
            },

            // Scene 14: Common ground with David
            {
                speaker: "david",
                text: "Six months... That's tight, but if you can build in clear milestones and kill-switches, I could support a pilot program.",
                emotion: "ü§î David is considering your proposal",
                setEmotion: { david: "ü§î", roger: "üòä" },
                effects: { credibility: 10 },
                addAlly: "david",
                next: 18
            },

            // Scene 15: Confrontation with David (BAD)
            {
                speaker: "david",
                text: "You're asking us to bet the company on your gut feeling. That's not leadership, that's recklessness.",
                emotion: "üò° David is now openly hostile. Roger looks disappointed.",
                setEmotion: { david: "üò°", roger: "üò†" },
                effects: { credibility: -15 },
                next: 18
            },

            // Scene 16: Rally Tom
            {
                speaker: "tom",
                text: "Actually, David, I think Alex is onto something. We have idle capacity right now. We could produce a sports drink without major capital investment. It's about smart formulation.",
                emotion: "üòä Tom backs you up! David looks surprised.",
                setEmotion: { tom: "üòä", david: "ü§î", roger: "ü§î" },
                effects: { credibility: 10 },
                addAlly: "tom",
                next: 18
            },

            // Scene 17: Merge strategies
            {
                speaker: "narrator",
                text: "David pauses. You can see the gears turning. Roger leans forward‚Äîthis kind of collaborative thinking is exactly what he wants to see.",
                emotion: "",
                setEmotion: { david: "ü§î", roger: "üòä" },
                effects: { credibility: 15 },
                addAlly: "david",
                next: 18
            },

            // Scene 18: Sarah's counter-proposal
            {
                speaker: "sarah",
                text: "I appreciate Alex's vision, but I have a different approach. Instead of a new product, we should use celebrity athlete endorsements for our existing iced teas. Cheaper, faster, less risky.",
                emotion: "üòê Sarah is presenting an alternative - indirectly competing with you",
                setEmotion: { sarah: "üòê" },
                next: 19
            },

            // Scene 19: Sarah continues
            {
                speaker: "sarah",
                text: "Plus, Alex's sports drink would compete with our own tea products. We'd be cannibalizing our brand.",
                emotion: "ü§î Sarah makes a strategic point",
                setEmotion: { sarah: "ü§î", roger: "ü§î" },
                next: 20
            },

            // Scene 20: Roger asks for your response
            {
                speaker: "roger",
                text: "That's a valid concern, Sarah. Alex, how do you respond?",
                emotion: "ü§î Roger is testing your strategic thinking",
                setEmotion: { roger: "ü§î" },
                choices: [
                    {
                        label: "A) ü§ù Propose collaboration",
                        text: "Sarah, what if we combine both? Sports Drink + your athlete endorsements?",
                        description: "Build alliance - inclusive leadership",
                        next: 21,
                        effects: { credibility: 15, politicalSavvy: 10 },
                        addAlly: "sarah"
                    },
                    {
                        label: "B) üìä Rational explanation",
                        text: "Different products target different markets. Sports drinks are consumed during exercise; teas are for relaxation.",
                        description: "Logic-based defense",
                        next: 22,
                        effects: { credibility: 10, politicalSavvy: 5 }
                    },
                    {
                        label: "C) üó≥Ô∏è Force a vote",
                        text: "Let's vote on it. We can't analyze forever - we need to decide.",
                        description: "Aggressive move - risky",
                        next: 23,
                        effects: { credibility: 0, politicalSavvy: -10 },
                        setEmotions: { roger: "üò†" }
                    },
                    {
                        label: "D) ‚è∏Ô∏è Suggest market research",
                        text: "Let's do customer research first, then decide. Data should drive this.",
                        description: "Cautious - buy time",
                        next: 24,
                        effects: { credibility: 5, politicalSavvy: 0 }
                    }
                ]
            },

            // Scene 21: Collaboration with Sarah
            {
                speaker: "sarah",
                text: "You know what? That could actually work. Athlete endorsements would be perfect for a sports drink. Alex, I'm in.",
                emotion: "üòä Sarah smiles - you've turned a competitor into an ally!",
                setEmotion: { sarah: "üòä", roger: "üòä" },
                effects: { credibility: 15 },
                addAlly: "sarah",
                next: 25
            },

            // Scene 22: Rational explanation
            {
                speaker: "narrator",
                text: "Sarah nods reluctantly. Your logic is sound. Roger seems satisfied with the answer, but you haven't gained her support.",
                emotion: "",
                setEmotion: { sarah: "üòê", roger: "üòä" },
                next: 25
            },

            // Scene 23: Force vote (BAD)
            {
                speaker: "roger",
                text: "Alex, this isn\'t about voting. This is about building consensus and making smart decisions. I'm disappointed in that approach.",
                emotion: "üò† Roger is not pleased with your impatience",
                setEmotion: { roger: "üò†", sarah: "üòê", david: "üò†", tom: "üòê", maria: "üòê" },
                effects: { credibility: -15 },
                next: 25
            },

            // Scene 24: Market research delay
            {
                speaker: "roger",
                text: "We don't have time for more research. We need to act now. I need leaders who can make decisions, not delay them.",
                emotion: "üòê Roger is frustrated with the delay tactic",
                setEmotion: { roger: "üòê" },
                effects: { credibility: -5 },
                next: 25
            },

            // Scene 25: Meeting break
            {
                speaker: "narrator",
                text: "Roger calls for a 15-minute break. This is your chance to work the room privately. You can approach ONE person for a crucial one-on-one conversation.",
                emotion: "",
                next: 26
            },

            // Scene 26: Choose who to approach
            {
                speaker: "narrator",
                text: "Who do you want to talk to during the break? Choose wisely - this could determine your fate.",
                emotion: "",
                choices: [
                    {
                        label: "A) üí∞ David (VP Finance)",
                        text: "Approach David: 'I'll support your cost cuts if you support my pilot.'",
                        description: "Trade support - political deal",
                        next: 27,
                        effects: { politicalSavvy: 15 }
                    },
                    {
                        label: "B) üéØ Maria (VP Sales)",
                        text: "Approach Maria: 'If Sports Drink succeeds, your sales numbers will skyrocket.'",
                        description: "Appeal to her self-interest",
                        next: 28,
                        effects: { politicalSavvy: 10 }
                    },
                    {
                        label: "C) üè≠ Tom (VP Production)",
                        text: "Approach Tom: 'I'll use existing capacity‚Äîno burden on Production.'",
                        description: "Remove his concerns",
                        next: 29,
                        effects: { politicalSavvy: 10 }
                    },
                    {
                        label: "D) üëî Roger (CEO)",
                        text: "Approach Roger directly: 'Let me show you why this is the future.'",
                        description: "Bold move - go straight to the top",
                        next: 30,
                        effects: { credibility: 10, politicalSavvy: 5 }
                    }
                ]
            },

            // Scene 27: David conversation
            {
                speaker: "david",
                text: "You're learning how this works. Alright, I'll back your pilot if you publicly support my cost-cutting measures for other departments.",
                emotion: "üòä David respects your political savvy",
                setEmotion: { david: "üòä" },
                effects: { credibility: 10, politicalSavvy: 15 },
                addAlly: "david",
                next: 31
            },

            // Scene 28: Maria conversation
            {
                speaker: "maria",
                text: "Hmm. You've got a point. I was skeptical, but if this gives me a new product to sell... Fine. I'll support you.",
                emotion: "üòä Maria sees the opportunity",
                setEmotion: { maria: "üòä" },
                effects: { credibility: 10, politicalSavvy: 10 },
                addAlly: "maria",
                next: 31
            },

            // Scene 29: Tom conversation
            {
                speaker: "tom",
                text: "I appreciate that. Production is always blamed for delays. If you're really not adding to my workload, I'll back you up in there.",
                emotion: "üòä Tom is relieved",
                setEmotion: { tom: "üòä" },
                effects: { credibility: 10, politicalSavvy: 10 },
                addAlly: "tom",
                next: 31
            },

            // Scene 30: Roger conversation
            {
                speaker: "roger",
                text: "I like your confidence, Alex. But I'm watching how you work with the team. Leadership isn\'t about having the best idea‚Äîit\'s about getting everyone aligned. Show me that.",
                emotion: "ü§î Roger is testing you",
                setEmotion: { roger: "ü§î" },
                effects: { credibility: 10 },
                next: 31
            },

            // Scene 31: Final meeting - Roger's decision moment
            {
                speaker: "narrator",
                text: "Everyone returns to the boardroom. Roger stands up, ready to make his decision.",
                emotion: "",
                next: 32
            },

            // Scene 32: Roger's final test
            {
                speaker: "roger",
                text: "I've heard everyone's proposals. Alex, I'm leaning toward giving you a shot at this Sports Drink project. But I have one final question: If I give you full authority, how will you structure your team?",
                emotion: "ü§î This is a leadership test!",
                setEmotion: { roger: "ü§î" },
                next: 33
            },

            // Scene 33: Final leadership question
            {
                speaker: "narrator",
                text: "This is it‚Äîyour answer will determine the ending. How you respond will show Roger what kind of leader you are.",
                emotion: "",
                choices: [
                    {
                        label: "A) ü§ù Inclusive leadership",
                        text: "I'll involve every VP. Each brings unique expertise‚ÄîDavid on budget, Sarah on marketing, Tom on production.",
                        description: "Collaborative approach - 'We' over 'I'",
                        next: "ENDING",
                        endingType: "calculate"
                    },
                    {
                        label: "B) üéØ Goal-oriented",
                        text: "I'll pick the people most committed to this vision. Alignment is key.",
                        description: "Results-focused - vision-driven",
                        next: "ENDING",
                        endingType: "calculate"
                    },
                    {
                        label: "C) üìã Detailed plan",
                        text: "David manages budget, Sarah handles marketing, Tom owns production. Clear roles, clear accountability.",
                        description: "Structured approach - process-driven",
                        next: "ENDING",
                        endingType: "calculate"
                    },
                    {
                        label: "D) üëÇ Participative leadership",
                        text: "I'll ask the team first. Psychological safety means everyone has input on structure.",
                        description: "Democratic approach - team-first",
                        next: "ENDING",
                        endingType: "calculate"
                    }
                ]
            }
        ];

        // ========== ENDINGS ==========
        const endings = {
            fired: {
                title: "üî• ENDING A: You're Fired",
                content: `
                    <p>One week later, you receive an email from HR.</p>
                    <p style="margin-top: 15px; color: #e74c3c;"><strong>"Dear Alex, As part of a restructuring initiative, your position has been eliminated. Your last day will be Friday."</strong></p>
                    <p style="margin-top: 15px;">Your project is cancelled. You're the casualty of boardroom politics. Roger decided you lacked the political savvy and relationship-building skills needed for executive leadership.</p>
                `,
                whatHappenedNext: `
                    <h3 style="color: #e74c3c; margin-bottom: 15px;">üì∞ What Happened Next</h3>
                    <p>Six months later, Snapple's decline continued. Without a clear innovation strategy, the company lost another 15% market share. Roger was eventually replaced by Quaker's board. Your successor lasted only three months before also being fired.</p>
                    <p style="margin-top: 15px;">You landed at a smaller beverage startup where your ideas were welcomed‚Äîbut you never forgot the lesson: great ideas without political capital are just dreams.</p>
                `,
                leadershipTips: [
                    {
                        icon: "ü§ù",
                        tip: "Power comes from networks, not authority",
                        course: "As Linda Hill taught: 'Management is not about formal authority‚Äîit\'s about navigating interdependencies.' You can\'t lead if you can\'t influence."
                    },
                    {
                        icon: "üí±",
                        tip: "Find currencies others value",
                        course: "Cohen & Bradford\'s \'currencies of exchange': David needed cost control, Sarah needed visibility. You didn\'t identify what to trade."
                    },
                    {
                        icon: "üë•",
                        tip: "Build coalitions before you need them",
                        course: "Caroline Regis lesson: She had expertise but lacked political capital post-merger. Build relationships early, not when you\'re desperate."
                    }
                ],
                courseConnection: `
                    <h4>üìö Why You Failed</h4>
                    <p><strong>You violated the core principle:</strong> "We" must be greater than "I." You fought alone. In organizations, individual brilliance without collective support leads to process losses‚Äîexactly what happened here.</p>
                `
            },
            sidelined: {
                title: "üòê ENDING B: Sidelined",
                content: `
                    <p>Roger approves a limited pilot of your Sports Drink project. But there's a catch.</p>
                    <p style="margin-top: 15px; color: #f39c12;"><strong>"Sarah will oversee the project. Alex, you'll report to her."</strong></p>
                    <p style="margin-top: 15px;">You're still employed, but your influence has been diminished. You get to work on your idea, but you're not leading it. You built some relationships, but not enough to be trusted with full authority.</p>
                `,
                whatHappenedNext: `
                    <h3 style="color: #f39c12; margin-bottom: 15px;">üì∞ What Happened Next</h3>
                    <p>The Sports Drink pilot showed mixed results. Sales were decent, but the product never got the full executive commitment needed to scale. Sarah took credit for the wins; you got blamed for the challenges.</p>
                    <p style="margin-top: 15px;">A year later, you're still VP of Innovation, but everyone knows you're not in the inner circle. You learned a valuable lesson: partial political capital leads to partial success.</p>
                `,
                leadershipTips: [
                    {
                        icon: "üéØ",
                        tip: "Psychological safety requires full commitment",
                        course: "Google's Project Aristotle: Teams succeed when everyone feels heard. You created some safety, but not enough. Half-measures don\'t work."
                    },
                    {
                        icon: "‚öñÔ∏è",
                        tip: "Strategic compromises beat perfectionism",
                        course: "Snapple exercise insight: Power = finding partners who share your vision AND making trade-offs. You compromised sometimes, but not strategically enough."
                    },
                    {
                        icon: "üîä",
                        tip: "Equal voice isn't just being nice‚Äîit's strategic",
                        course: "Conversational turn-taking (Project Aristotle) isn\'t about politeness‚Äîit surfaces blind spots. You listened, but not enough to unlock collective intelligence."
                    }
                ],
                courseConnection: `
                    <h4>üìö What You Missed</h4>
                    <p><strong>You understood the game but didn't master it.</strong> You created some process gains through coordination, but also allowed process losses through incomplete buy-in. Result: mediocre performance.</p>
                `
            },
            projectLead: {
                title: "üéâ ENDING C: Project Lead - You Did It!",
                content: `
                    <p style="color: #2ecc71; font-size: 1.3em;"><strong>Roger smiles and extends his hand.</strong></p>
                    <p style="margin-top: 15px;">"Alex, I'm approving the Snapple Sports Drink project. You'll have full authority as Project Lead. David will manage budget, Sarah will handle marketing, and Tom will oversee production."</p>
                    <p style="margin-top: 15px;"><strong>You did it.</strong> You navigated boardroom politics, built cross-functional alliances, and demonstrated strategic leadership. Your project is greenlit, and you're leading it.</p>
                `,
                whatHappenedNext: `
                    <h3 style="color: #2ecc71; margin-bottom: 15px;">üì∞ What Happened Next</h3>
                    <p>The Snapple Sports Drink launched 9 months later to strong reviews. Sales exceeded projections by 25% in the first quarter. Your collaborative approach meant every VP felt invested in the success‚ÄîDavid kept costs under control, Sarah's marketing was brilliant, and Tom's production was flawless.</p>
                    <p style="margin-top: 15px;">Roger publicly credited "Alex's leadership in building a unified executive team." You proved that influence beats authority every time.</p>
                `,
                leadershipTips: [
                    {
                        icon: "üîÑ",
                        tip: "Reciprocity creates sustainable influence",
                        course: "Linda Hill\'s \'law of reciprocity': You gave David cost controls, Sarah marketing integration, Tom production efficiency. They gave you loyalty. That's how influence works."
                    },
                    {
                        icon: "üé≠",
                        tip: "Shared vision beats individual genius",
                        course: "Team Process formula: You maximized process GAINS (coordination, motivation) and minimized LOSSES (conflict, social loafing). Actual performance exceeded potential."
                    },
                    {
                        icon: "üõ°Ô∏è",
                        tip: "Psychological safety unlocks performance",
                        course: "Google's key finding: When people feel safe to contribute, teams achieve more. You created that environment‚ÄîDavid felt heard, Sarah felt valued, Tom felt respected."
                    }
                ],
                courseConnection: `
                    <h4>üìö What You Did Right</h4>
                    <p><strong>You proved "We" > "I".</strong> Your success came from building networks (Linda Hill), finding currencies to trade (Cohen & Bradford), and creating psychological safety (Project Aristotle). This is leadership.</p>
                `
            },
            promoted: {
                title: "üöÄ ENDING D: Promoted to COO - Leadership Mastered!",
                content: `
                    <p style="color: #f1c40f; font-size: 1.5em;"><strong>Three months later...</strong></p>
                    <p style="margin-top: 15px;">The Snapple Sports Drink pilot is a massive success. Sales exceeded projections by 40%. Roger calls you into his office.</p>
                    <p style="margin-top: 15px; color: #2ecc71;"><strong>"Alex, I need someone who can unite this entire leadership team. Someone who understands both vision AND politics. I'm promoting you to Chief Operating Officer."</strong></p>
                    <p style="margin-top: 15px;">You didn\'t just survive boardroom politics‚Äî<strong>you mastered it.</strong></p>
                    <p style="margin-top: 15px;">You've demonstrated the most critical leadership skill: the ability to create shared goals, build coalitions, and turn competing interests into collaborative success.</p>
                `,
                whatHappenedNext: `
                    <h3 style="color: #f1c40f; margin-bottom: 15px;">üì∞ What Happened Next</h3>
                    <p>As COO, you transformed Snapple's entire culture. The executive team that was once fractured and competitive became collaborative and aligned. David, Sarah, Maria, and Tom all became your strongest advocates.</p>
                    <p style="margin-top: 15px;">Two years later, Snapple's market share rebounded by 35%. The board credited your leadership with "saving the Quaker acquisition." You were featured in Harvard Business Review's "40 Under 40" list.</p>
                    <p style="margin-top: 15px; color: #2ecc71;"><strong>More importantly: You became the kind of leader people want to follow.</strong></p>
                `,
                leadershipTips: [
                    {
                        icon: "üß©",
                        tip: "Great leaders make others better",
                        course: "You didn\'t just succeed‚Äîyou made David feel like a strategic partner, Sarah feel like a creative force, and Tom feel like an operational genius. THAT\'S leadership."
                    },
                    {
                        icon: "üéØ",
                        tip: "Politics isn't dirty‚Äîit's how work gets done",
                        course: "Linda Hill: 'Managers must find ways to acquire power and exercise influence.' You mastered this. You identified currencies, built networks, and created coalitions strategically."
                    },
                    {
                        icon: "üíé",
                        tip: "Process gains compound exponentially",
                        course: "Team Process: When you eliminate motivation/coordination losses AND add effective collaboration, actual performance far exceeds potential. You proved this‚Äî40% above projections."
                    }
                ],
                courseConnection: `
                    <h4>üìö Leadership Mastery</h4>
                    <p><strong>You internalized every principle:</strong></p>
                    <p style="margin-top: 10px;">‚úÖ <strong>Power through networks</strong> (Linda Hill) - You built coalitions before you needed them</p>
                    <p>‚úÖ <strong>Psychological safety</strong> (Project Aristotle) - Everyone felt heard, which unlocked collective intelligence</p>
                    <p>‚úÖ <strong>"We" over "I"</strong> (Team Process) - You maximized process gains and minimized losses</p>
                    <p>‚úÖ <strong>Strategic currencies</strong> (Cohen & Bradford) - You identified what others valued and traded effectively</p>
                    <p>‚úÖ <strong>Early coalition building</strong> (Caroline Regis lesson) - Unlike Regis, you built political capital from day one</p>
                    <p style="margin-top: 15px; color: #f1c40f;"><strong>This is what it means to lead.</strong></p>
                `
            }
        };

        // ========== GAME FUNCTIONS ==========
        
        function startGame() {
            document.getElementById('title-screen').classList.add('hidden');
            document.getElementById('meet-players-screen').classList.add('hidden');
            document.getElementById('meet-players-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            document.getElementById('score-bar').style.display = 'block';
            document.getElementById('dialogue-box').style.display = 'block';
            document.getElementById('characters').style.display = 'flex';
            document.getElementById('choices').style.display = 'block';
            document.getElementById('scene-illustration').style.display = 'block';
            
            showScene(0);
        }

        function showScene(sceneIndex) {
            const scene = scenes[sceneIndex];
            gameState.currentScene = sceneIndex;
            updateSceneIllustration(sceneIndex);
            
            // Update dialogue box
            const dialogueBox = document.getElementById('dialogue-box');
            const speakerName = document.getElementById('speaker-name');
            const dialogueText = document.getElementById('dialogue-text');
            const dialogueEmotion = document.getElementById('dialogue-emotion');
            
            if (scene.speaker === "narrator") {
                speakerName.textContent = "üìñ Narrator";
                speakerName.style.color = "#95a5a6";
            } else if (scene.speaker === "alex") {
                speakerName.textContent = "üí° You (Alex)";
                speakerName.style.color = "#3498db";
            } else {
                const char = characters[scene.speaker];
                speakerName.textContent = `${char.icon} ${char.name}`;
                speakerName.style.color = getCharacterColor(scene.speaker);
            }
            
            dialogueText.textContent = scene.text;
            dialogueEmotion.textContent = scene.emotion || "";
            
            // Update character emotions
            if (scene.setEmotion) {
                Object.keys(scene.setEmotion).forEach(char => {
                    gameState.characterEmotions[char] = scene.setEmotion[char];
                    updateCharacterEmotion(char);
                });
            }
            
            // Highlight speaking character
            document.querySelectorAll('.character').forEach(char => {
                char.classList.remove('speaking');
            });
            if (scene.speaker !== "narrator") {
                const speakingChar = document.querySelector(`.character.${scene.speaker}`);
                if (speakingChar) {
                    speakingChar.classList.add('speaking');
                }
            }
            
            // Show choices or continue button
            const choicesDiv = document.getElementById('choices');
            const continueBtn = document.getElementById('continue-button');
            
            if (scene.choices && scene.choices.length > 0) {
                choicesDiv.innerHTML = '';
                scene.choices.forEach((choice, index) => {
                    const button = document.createElement('button');
                    button.className = 'choice-button';
                    button.type = 'button'; // Prevent form submission
                    button.innerHTML = `
                        <span class="choice-label">${choice.label}</span>
                        <div>${choice.text}</div>
                        <div class="choice-description">${choice.description}</div>
                    `;
                    button.onclick = (e) => {
                        e.preventDefault(); // Prevent any default behavior
                        e.stopPropagation(); // Stop event bubbling
                        makeChoice(choice);
                    };
                    choicesDiv.appendChild(button);
                });
                continueBtn.style.display = 'none';
            } else if (scene.next === "ENDING") {
                // This shouldn't happen as choices lead to ending
                showEnding();
            } else if (scene.next !== undefined) {
                choicesDiv.innerHTML = '';
                continueBtn.style.display = 'block';
            } else {
                // End of story without choices
                choicesDiv.innerHTML = '';
                continueBtn.style.display = 'none';
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function makeChoice(choice) {
            console.log("makeChoice called with:", choice);
            console.log("choice.next =", choice.next);
            
            // Apply effects
            if (choice.effects) {
                if (choice.effects.credibility) {
                    gameState.credibility = Math.max(0, Math.min(100, gameState.credibility + choice.effects.credibility));
                }
                if (choice.effects.politicalSavvy) {
                    gameState.politicalSavvy = Math.max(0, Math.min(100, gameState.politicalSavvy + choice.effects.politicalSavvy));
                }
            }
            
            // Add allies
            if (choice.addAlly && !gameState.allies.includes(choice.addAlly)) {
                gameState.allies.push(choice.addAlly);
            }
            
            // Set emotions
            if (choice.setEmotions) {
                Object.keys(choice.setEmotions).forEach(char => {
                    gameState.characterEmotions[char] = choice.setEmotions[char];
                    updateCharacterEmotion(char);
                });
            }
            
            // Update UI
            updateScores();
            
            // Save choice
            gameState.choices[gameState.currentScene] = choice.label;
            
            // Navigate
            console.log("Checking navigation...");
            if (choice.next === "ENDING") {
                console.log("Calling showEnding()!");
                showEnding();
            } else {
                console.log("Calling showScene:", choice.next);
                showScene(choice.next);
            }
        }

        function continueStory() {
            const scene = scenes[gameState.currentScene];
            if (scene.next !== undefined && scene.next !== "ENDING") {
                showScene(scene.next);
            }
        }

        function updateScores() {
            // Update credibility
            document.getElementById('credibility-bar').style.width = gameState.credibility + '%';
            document.getElementById('credibility-value').textContent = gameState.credibility + '/100';
            
            // Update political savvy
            document.getElementById('savvy-bar').style.width = gameState.politicalSavvy + '%';
            document.getElementById('savvy-value').textContent = gameState.politicalSavvy + '/100';
            
            // Update allies
            const alliesList = document.getElementById('allies-list');
            if (gameState.allies.length === 0) {
                alliesList.textContent = "None yet";
                alliesList.style.color = "#95a5a6";
            } else {
                const allyNames = gameState.allies.map(ally => characters[ally].name);
                alliesList.textContent = allyNames.join(', ');
                alliesList.style.color = "#2ecc71";
            }
        }

        function updateCharacterEmotion(charName) {
            const emotionDiv = document.getElementById(charName + '-emotion');
            if (emotionDiv) {
                emotionDiv.textContent = gameState.characterEmotions[charName];
            }
        }

        function getCharacterColor(charName) {
            const colors = {
                alex: '#3498db',
                david: '#27ae60',
                sarah: '#e74c3c',
                maria: '#f39c12',
                tom: '#95a5a6',
                roger: '#f1c40f'
            };
            return colors[charName] || '#ffffff';
        }

        function showEnding() {
            console.log("=== SHOWENDING CALLED ===");
            console.log("Current gameState:", gameState);
            
            // Calculate ending based on scores and allies
            let endingType;
            
            const allyCount = gameState.allies.length;
            const avgScore = (gameState.credibility + gameState.politicalSavvy) / 2;
            
            console.log("allyCount:", allyCount);
            console.log("avgScore:", avgScore);
            
            if (avgScore >= 80 && allyCount >= 4) {
                endingType = 'promoted';
            } else if (avgScore >= 55 && allyCount >= 2) {
                endingType = 'projectLead';
            } else if (avgScore >= 35 || allyCount >= 1) {
                endingType = 'sidelined';
            } else {
                endingType = 'fired';
            }
            
            console.log("Ending type:", endingType);
            
            const ending = endings[endingType];
            console.log("Ending object:", ending);
            
            // Hide game screen
            document.getElementById('game-screen').classList.add('hidden');
            
            // Show ending screen
            const endingScreen = document.getElementById('ending-screen');
            endingScreen.classList.remove('hidden');
            endingScreen.style.display = 'block';
            endingScreen.style.display = 'block';
            
            console.log("Setting ending content...");
            
            document.getElementById('ending-title').innerHTML = ending.title;
            document.getElementById('ending-content').innerHTML = ending.content;
            
            // Show "What Happened Next"
            document.getElementById('what-happened-next').innerHTML = ending.whatHappenedNext;
            
            // Show Leadership Tips
            const tipsHTML = `
                <h3>üí° 3 Leadership Lessons</h3>
                ${ending.leadershipTips.map(tip => `
                    <div class="leadership-tip">
                        <div class="leadership-tip-header">
                            <span class="leadership-tip-icon">${tip.icon}</span>
                            <span class="leadership-tip-title">${tip.tip}</span>
                        </div>
                        <div class="leadership-tip-course">${tip.course}</div>
                    </div>
                `).join('')}
            `;
            document.getElementById('leadership-tips').innerHTML = tipsHTML;
            
            document.getElementById('course-connection').innerHTML = ending.courseConnection;
            
            // Show final scores
            const finalScoresDiv = document.getElementById('final-scores');
            const allyNames = gameState.allies.length > 0 
                ? gameState.allies.map(a => characters[a].name).join(', ')
                : 'None';
            
            finalScoresDiv.innerHTML = `
                <h3>üìä Your Final Scores</h3>
                <p style="margin-top: 10px;"><strong>Credibility:</strong> ${gameState.credibility}/100</p>
                <p><strong>Political Savvy:</strong> ${gameState.politicalSavvy}/100</p>
                <p><strong>Allies:</strong> ${allyNames}</p>
            `;
            
            console.log("=== ENDING SCREEN SHOULD NOW BE VISIBLE ===");
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Initialize emotions
        Object.keys(gameState.characterEmotions).forEach(char => {
            updateCharacterEmotion(char);
        });
        
    </script>
</body>
</html>
